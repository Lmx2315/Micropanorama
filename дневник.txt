03-07-2020
----------
COM6 115200

~0 att:4.255;  //att=255 (30дб)

Четвёртая плата

Level = +0.6  Дбм  
Level = -0.47 Дбм
Level = -0.0  Дбм тут установлены 1 дБ аттенюаторы!!!
Level = ----- Дбм не смонтирован до конца 

30-06-2020
-----------
после смесителя - ставим аттенюатор 6дб (так как мало 3 дб)


25-06-2020
------------

Три красные платы проверены по сигналу и работают (не проверены аттенюаторы управляемые и детекторы мощности).

На одной плате в трёх каналах сигнал был на 10 Дб ниже чем в оставшемся канале - как выяснилось , в проблемных каналах был меньше уровень гетеродина на 10 Дб. 
Потому что микросхема делителя гетеродина была неправильно запаяна!!!

~0 att:1.255;  // [adr].[att]  adr=1..4 | att=255 (30дб)

пока сделано так что все аттенюаторы на одной плате управляются одновременно!!!

Потребление красной платы +  плата питания : 1.11 Ампер 12В
Подаём 3.1 ГГц генератор Level = -34Дбм (-20Дбм генератор + аттенюатор)
На выходе : 435 Мгц ,   
Level = -1.12 Дбм
Level = -2.52 Дбм
Level = +1.45 Дбм
Level = +1.27 Дбм

Level = +0.07 Дбм
Level = -1.82 Дбм
Level = -0.84 Дбм
Level = +3.50 Дбм 

Level = -0.43 Дбм
Level = -3.45 Дбм
Level = -0.73 Дбм
Level = +2.32 Дбм 

Судя по всему - спуры в спектре гетеродина , на растоянии примерно 50 кгц , были от DC/Dc
кеоторый был недогружен. Когда смотрели выходной сигнал красной платы (нагрузка DC/DC) спектр был чистым.



Максимальный уровень S/N был тем больше чем больше входной уровень сигнала REF
при +15 ДБм - S/N = >45 Дб


ФАПЧ:
C93   	5.6 пФ
C94	100 пФ
R154	4.7 К
R156	10 К
C97	5.6 пФ

freq :2665 МГц
Fref :100  МГц
Fсрав:  5  МГц


Зы - если мк не програмируется через флешлоадер - попробуй в программе снизить скорость.

23-06-2020
----------
А ЛДО -то стоит! А помехи есть.

Сейчас плата с ФАПЧ и БП - не работает как генератор , точнее работает плохо на вых частоту 500 МГц.
Пытаюсь на этой частоте отладить ФАПЧ.


24-04-2020
----------
Не забудь подключить:
100  Мгц - эталон на плату питания
3100 Мгц - сигнал на вход канала

автоматом програмируется гетеродин для промежутки 435 Мгц и атт=0


Потребление по 12V:0.28 А (одна плата питания для смесителя)
Потребление по 12V:1.11 А (     плата питания для смесителя + смеситель, одна красная плата)

PВход = -34 ДБм
Pвых  =  (ATT:4.0) 
ДБм :
6.5
6.3
7.3
8.0

Обычные неисправности при пайке:
Проблемы с чёрными обычными аттенюаторам, смесителем, управляемым аттенюатором.


10-04-2020
----------
Частота сравнения ФАПЧ - 5 Мгц (ближе вылазили палки частоты сравнения)
на спектре торчат палки 230 кгц , возможно что с импульсного источника питания (нужно в предь ставить по питанию малошумящий LDO на ФАПЧ и экранировать ПИФ фильтр)
Fсиг=3.1   ГГц
Fг  =2.665 ГГц

PВход = -34 ДБм
Pвых  =  (ATT:4.0) 
1.85
1.68
5.68
4.5   ДБм 

!!!
Не работал вывод порта А на стм32 , потому что забыл подключить клоки этого порта в программе.

09-04-2020
----------
Проект в keil 5 , называется : Micropanorama
Плата синтезирует 3Ггц и выдаёт в дифф виде на платы приёмных смесителей, ref =100Мгц , приходит из -вне (с платы модулятора)
рабочий COM6 - 115200
Есть какя-то проблема со стартом схемы после ресета - не стартует, нужно вкл/выкл питание .

~0 adf:2565; - команда чтобы получить выход 435 Мгц если генератор выдаёт 3000 Мгц
~0 att:4.63; - команда сразу на четыре канала на плате перестройки аттенюатора (первая цифра - номер платы, вторая - дБ подавления делёные на 2)


23-03-2020
----------
команда установки частоты в блоке 
~0 adf:3000;
REF 100 MHz
По умолчанию при старте частота не устанавливается! Надо подавать команду.

24-01-2020
----------
Выяснилось откуда спуры были в спектре сигнала ФАПЧ - наводки с цифровой части схемы.
Когда соеденили по "земле" в одной точке ближе к источникам питания земли "agnd" и "dgnd" - спуры пропали совсем.

Из проблем осталось настроить ПИФ фильтр pll чтобы сигнал был получше , пока шумовые холмы по бокам высокие, надо что-то сделать.




21-01-2020
----------
рабочий COM6 (COM5,COM6)
Чтобы прошить плату надо:
1.Проверить что стоит джампер  XT12
2.Снять джампер XT13
3.Сделать ресет джампером XT14

Схема должна быть после этого статична.

4.Применить обычные манипуляции в программах stm32_boot и Flash loader Demonstrator

Программаторы через jtag почему-то только прошивают флешку но не позволяют мк запустить.
Приходиться выключать и включать питание.